2025-11-05 09:32:22.756 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.mapper.ProductMapper.getProductFullInfoById - ==>  Preparing: SELECT pbi.id, pbi.product_id, pbi.parent_product_id, pbi.title, pbi.brand, pbi.seller_id, pbi.seller_name, pbi.platform, pbi.product_url, pbi.status, pbi.main_image_url, pbi.image_urls, pbi.product_description, pbi.selling_points, pbi.specifications, pbi.quick_buy_url, pp.current_price, pp.original_price, pp.currency, pp.discount_percentage, pp.discount_amount, pp.unit_price, prr.rating, prr.reviews_count, prr.answered_questions, prr.best_sellers_rank, prr.category_rank, prr.category_name, prr.match_percentage, prr.recommendation_reason, pi.availability, pi.stock_quantity, pi.ships_from, pi.prime_eligible, pi.return_policy, pct.categories, pct.root_category, pct.subcategory, pct.product_type, pct.target_audience, pct.badges, pct.promotion_tags, pbi.created_at, pbi.updated_at FROM product_basic_info pbi LEFT JOIN product_pricing pp ON pbi.product_id = pp.product_id LEFT JOIN product_reviews_rank prr ON pbi.product_id = prr.product_id LEFT JOIN product_inventory pi ON pbi.product_id = pi.product_id LEFT JOIN product_category_tags pct ON pbi.product_id = pct.product_id WHERE pbi.product_id = ?
2025-11-05 09:32:22.759 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.mapper.ProductMapper.getProductFullInfoById - ==> Parameters: P10001(String)
2025-11-05 09:32:22.760 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.mapper.ProductMapper.getProductFullInfoById - <==      Total: 1
2025-11-05 09:32:22.761 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.ProductReviewMapper.getReviewsByProductId - ==>  Preparing: SELECT * FROM product_review WHERE product_id = ? ORDER BY review_time DESC
2025-11-05 09:32:22.761 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.ProductReviewMapper.getReviewsByProductId - ==> Parameters: P10001(String)
2025-11-05 09:32:22.762 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.ProductReviewMapper.getReviewsByProductId - <==      Total: 3
2025-11-05 09:32:22.762 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.P.getPriceComparisonByProductId - ==>  Preparing: SELECT * FROM product_price_comparison WHERE product_id = ? ORDER BY current_price ASC
2025-11-05 09:32:22.762 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.P.getPriceComparisonByProductId - ==> Parameters: P10001(String)
2025-11-05 09:32:22.763 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.P.getPriceComparisonByProductId - <==      Total: 3
2025-11-05 09:45:21.966 [http-nio-0.0.0.0-8081-exec-8] DEBUG c.e.a.mapper.ProductMapper.getTopSellingProducts - ==>  Preparing: SELECT pbi.id, pbi.product_id, pbi.parent_product_id, pbi.title, pbi.brand, pbi.seller_id, pbi.seller_name, pbi.platform, pbi.product_url, pbi.status, pbi.main_image_url, pbi.image_urls, pbi.product_description, pbi.selling_points, pbi.specifications, pbi.quick_buy_url, pp.current_price, pp.original_price, pp.currency, pp.discount_percentage, pp.discount_amount, pp.unit_price, prr.rating, prr.reviews_count, prr.answered_questions, prr.best_sellers_rank, prr.category_rank, prr.category_name, prr.match_percentage, prr.recommendation_reason, pi.availability, pi.stock_quantity, pi.ships_from, pi.prime_eligible, pi.return_policy, pct.categories, pct.root_category, pct.subcategory, pct.product_type, pct.target_audience, pct.badges, pct.promotion_tags, pbi.created_at, pbi.updated_at FROM product_basic_info pbi LEFT JOIN product_pricing pp ON pbi.product_id = pp.product_id LEFT JOIN product_reviews_rank prr ON pbi.product_id = prr.product_id LEFT JOIN product_inventory pi ON pbi.product_id = pi.product_id LEFT JOIN product_category_tags pct ON pbi.product_id = pct.product_id WHERE prr.best_sellers_rank IS NOT NULL ORDER BY prr.best_sellers_rank ASC LIMIT ?
2025-11-05 09:45:21.967 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.mapper.BlindBoxMapper.getAllActiveRules - ==>  Preparing: SELECT * FROM blind_box_rule WHERE status = 'ACTIVE' ORDER BY create_time DESC
2025-11-05 09:45:21.985 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.mapper.BlindBoxMapper.getAllActiveRules - ==> Parameters: 
2025-11-05 09:45:21.985 [http-nio-0.0.0.0-8081-exec-8] DEBUG c.e.a.mapper.ProductMapper.getTopSellingProducts - ==> Parameters: 3(Integer)
2025-11-05 09:45:22.026 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.mapper.BlindBoxMapper.getAllActiveRules - <==      Total: 5
2025-11-05 09:45:22.055 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - ==>  Preparing: SELECT p.id, p.product_id as productId, p.title, p.brand, p.main_image_url as mainImageUrl, p.status, pr.current_price as currentPrice, pr.original_price as originalPrice, pr.currency, pr.discount_percentage as discountPercentage, rv.rating, rv.reviews_count as reviewsCount, inv.availability, inv.prime_eligible as primeEligible, cat.root_category as rootCategory, cat.subcategory FROM product_basic_info p LEFT JOIN product_pricing pr ON p.product_id = pr.product_id LEFT JOIN product_reviews_rank rv ON p.product_id = rv.product_id LEFT JOIN product_inventory inv ON p.product_id = inv.product_id LEFT JOIN product_category_tags cat ON p.product_id = cat.product_id WHERE p.status = 'ACTIVE' AND cat.root_category = ? AND pr.current_price >= ? AND pr.current_price <= ? ORDER BY RAND() LIMIT ?
2025-11-05 09:45:22.115 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - ==> Parameters: 游戏设备(String), 1000.00(BigDecimal), 4000.00(BigDecimal), 15(Integer)
2025-11-05 09:45:22.228 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - <==      Total: 1
2025-11-05 09:45:22.231 [http-nio-0.0.0.0-8081-exec-8] DEBUG c.e.a.mapper.ProductMapper.getTopSellingProducts - <==      Total: 3
2025-11-05 09:45:22.242 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - ==>  Preparing: SELECT p.id, p.product_id as productId, p.title, p.brand, p.main_image_url as mainImageUrl, p.status, pr.current_price as currentPrice, pr.original_price as originalPrice, pr.currency, pr.discount_percentage as discountPercentage, rv.rating, rv.reviews_count as reviewsCount, inv.availability, inv.prime_eligible as primeEligible, cat.root_category as rootCategory, cat.subcategory FROM product_basic_info p LEFT JOIN product_pricing pr ON p.product_id = pr.product_id LEFT JOIN product_reviews_rank rv ON p.product_id = rv.product_id LEFT JOIN product_inventory inv ON p.product_id = inv.product_id LEFT JOIN product_category_tags cat ON p.product_id = cat.product_id WHERE p.status = 'ACTIVE' AND cat.root_category = ? AND pr.current_price >= ? AND pr.current_price <= ? ORDER BY RAND() LIMIT ?
2025-11-05 09:45:22.243 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - ==> Parameters: 家用电器(String), 750.00(BigDecimal), 3500.00(BigDecimal), 9(Integer)
2025-11-05 09:45:22.244 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - <==      Total: 0
2025-11-05 09:45:22.245 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - ==>  Preparing: SELECT p.id, p.product_id as productId, p.title, p.brand, p.main_image_url as mainImageUrl, p.status, pr.current_price as currentPrice, pr.original_price as originalPrice, pr.currency, pr.discount_percentage as discountPercentage, rv.rating, rv.reviews_count as reviewsCount, inv.availability, inv.prime_eligible as primeEligible, cat.root_category as rootCategory, cat.subcategory FROM product_basic_info p LEFT JOIN product_pricing pr ON p.product_id = pr.product_id LEFT JOIN product_reviews_rank rv ON p.product_id = rv.product_id LEFT JOIN product_inventory inv ON p.product_id = inv.product_id LEFT JOIN product_category_tags cat ON p.product_id = cat.product_id WHERE p.status = 'ACTIVE' AND cat.subcategory = ? AND pr.current_price >= ? AND pr.current_price <= ? ORDER BY RAND() LIMIT ?
2025-11-05 09:45:22.246 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - ==> Parameters: 手机(String), 133.33(BigDecimal), 50000.00(BigDecimal), 9(Integer)
2025-11-05 09:45:22.248 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - <==      Total: 2
2025-11-05 09:45:22.248 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - ==>  Preparing: SELECT p.id, p.product_id as productId, p.title, p.brand, p.main_image_url as mainImageUrl, p.status, pr.current_price as currentPrice, pr.original_price as originalPrice, pr.currency, pr.discount_percentage as discountPercentage, rv.rating, rv.reviews_count as reviewsCount, inv.availability, inv.prime_eligible as primeEligible, cat.root_category as rootCategory, cat.subcategory FROM product_basic_info p LEFT JOIN product_pricing pr ON p.product_id = pr.product_id LEFT JOIN product_reviews_rank rv ON p.product_id = rv.product_id LEFT JOIN product_inventory inv ON p.product_id = inv.product_id LEFT JOIN product_category_tags cat ON p.product_id = cat.product_id WHERE p.status = 'ACTIVE' AND cat.subcategory = ? AND pr.current_price >= ? AND pr.current_price <= ? ORDER BY RAND() LIMIT ?
2025-11-05 09:45:22.249 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - ==> Parameters: 耳机(String), 500.00(BigDecimal), 1500.00(BigDecimal), 6(Integer)
2025-11-05 09:45:22.250 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - <==      Total: 0
2025-11-05 09:45:22.250 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - ==>  Preparing: SELECT p.id, p.product_id as productId, p.title, p.brand, p.main_image_url as mainImageUrl, p.status, pr.current_price as currentPrice, pr.original_price as originalPrice, pr.currency, pr.discount_percentage as discountPercentage, rv.rating, rv.reviews_count as reviewsCount, inv.availability, inv.prime_eligible as primeEligible, cat.root_category as rootCategory, cat.subcategory FROM product_basic_info p LEFT JOIN product_pricing pr ON p.product_id = pr.product_id LEFT JOIN product_reviews_rank rv ON p.product_id = rv.product_id LEFT JOIN product_inventory inv ON p.product_id = inv.product_id LEFT JOIN product_category_tags cat ON p.product_id = cat.product_id WHERE p.status = 'ACTIVE' AND cat.subcategory = ? AND pr.current_price >= ? AND pr.current_price <= ? ORDER BY RAND() LIMIT ?
2025-11-05 09:45:22.251 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - ==> Parameters: 游戏设备(String), 1333.33(BigDecimal), 3000.00(BigDecimal), 6(Integer)
2025-11-05 09:45:22.252 [http-nio-0.0.0.0-8081-exec-4] DEBUG c.e.a.m.BlindBoxMapper.getRandomProductsByCategory - <==      Total: 0
2025-11-05 09:45:30.071 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.mapper.ProductMapper.getProductFullInfoById - ==>  Preparing: SELECT pbi.id, pbi.product_id, pbi.parent_product_id, pbi.title, pbi.brand, pbi.seller_id, pbi.seller_name, pbi.platform, pbi.product_url, pbi.status, pbi.main_image_url, pbi.image_urls, pbi.product_description, pbi.selling_points, pbi.specifications, pbi.quick_buy_url, pp.current_price, pp.original_price, pp.currency, pp.discount_percentage, pp.discount_amount, pp.unit_price, prr.rating, prr.reviews_count, prr.answered_questions, prr.best_sellers_rank, prr.category_rank, prr.category_name, prr.match_percentage, prr.recommendation_reason, pi.availability, pi.stock_quantity, pi.ships_from, pi.prime_eligible, pi.return_policy, pct.categories, pct.root_category, pct.subcategory, pct.product_type, pct.target_audience, pct.badges, pct.promotion_tags, pbi.created_at, pbi.updated_at FROM product_basic_info pbi LEFT JOIN product_pricing pp ON pbi.product_id = pp.product_id LEFT JOIN product_reviews_rank prr ON pbi.product_id = prr.product_id LEFT JOIN product_inventory pi ON pbi.product_id = pi.product_id LEFT JOIN product_category_tags pct ON pbi.product_id = pct.product_id WHERE pbi.product_id = ?
2025-11-05 09:45:30.072 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.mapper.ProductMapper.getProductFullInfoById - ==> Parameters: P10001(String)
2025-11-05 09:45:30.074 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.mapper.ProductMapper.getProductFullInfoById - <==      Total: 1
2025-11-05 09:45:30.074 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.ProductReviewMapper.getReviewsByProductId - ==>  Preparing: SELECT * FROM product_review WHERE product_id = ? ORDER BY review_time DESC
2025-11-05 09:45:30.074 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.ProductReviewMapper.getReviewsByProductId - ==> Parameters: P10001(String)
2025-11-05 09:45:30.077 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.ProductReviewMapper.getReviewsByProductId - <==      Total: 3
2025-11-05 09:45:30.077 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.P.getPriceComparisonByProductId - ==>  Preparing: SELECT * FROM product_price_comparison WHERE product_id = ? ORDER BY current_price ASC
2025-11-05 09:45:30.077 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.P.getPriceComparisonByProductId - ==> Parameters: P10001(String)
2025-11-05 09:45:30.079 [http-nio-0.0.0.0-8081-exec-9] DEBUG c.e.a.m.P.getPriceComparisonByProductId - <==      Total: 3
